

<div class="carousel-inner" style="width:100%;height:100%">




  <%# if @boards.where("no >= 1 and no <= 9") != [] and @boards.where("no >= 10 and no <= 18") == [] %> <!-- jika table ada isinya -->
  <!--   <div class="item active" data-interval="15000">
      <input type="hidden" value="table1" class="hidden" />
      <div id="board1">
        <%#= render "table" %>
      </div>
    </div> -->
  <%# elsif @boards.where("no >= 1 and no <= 9") == [] and @boards.where("no >= 10 and no <= 18") != [] %> <!-- jika table2 ada isinya -->
  <%# @refresh = true %>
   <!--  <div class="item active" data-interval="15000">
      <input type="hidden" value="table2" class="hidden" />
      <div id="board2">
        <%#= render "table2" %>
      </div>
    </div> -->
  <%# elsif @boards.where("no >= 1 and no <= 9") == [] and @boards.where("no >= 10 and no <= 18") == [] %> <!-- jika table dan table2 kosong -->
    <!-- <font color=red size=8>Please turn on at least one line</font> -->
  <%# else %> <!-- jika table dan table2 ada isinya -->
  <!--   <div class="item active" data-interval="15000">
      <input type="hidden" value="table1" class="hidden" />
      <div id="board1">
        <%#= render "table" %>
      </div>
    </div>
    <div class="item" data-interval="15000">
      <input type="hidden" value="table2" class="hidden" />
      <div id="board2">
        <%#= render "table2" %>
      </div>
    </div> -->
  <%# end %>


<!-- tablet semua line -->

<% table_no = 0 %>
<% (Line.where(:visible=>true).order("no DESC").first.no.to_i / @row_per_table .to_f ).ceil.times do  %>

  <div class="item <%= table_no == 0 ? 'active' : '' %>" data-interval="15000">
    <input type="hidden" value="table_<%= table_no %>" class="hidden" />
    <div id="board<%= table_no %>"> 
      <% if table_no == 0 %>
        <%= render "table", :table_no=>table_no, :row_per_table=>@row_per_table, :boards=>@boards.order("no ASC") %>
      <% end %>
    </div>
  </div>

  <% table_no = table_no + 1 %>
<% end %>



<!-- grafik tiap line -->
  <% Line.where(:visible=>true).order("no ASC").each_with_index do |big_dat, index| %>
    <div class="item" data-interval="<%= Line.find_by_no(big_dat.no).slide_duration %>000">
      <input type="hidden" value="<%= big_dat.no.to_s %>" class="hidden" />
      <div id="detail_graph_<%= big_dat.no.to_s %>">
        <%#= render "detail_graph", :big => big_dat %>
      </div>
    </div>
  <% end %>


<!-- banner / images -->
  <% Image.where("status=?",true).order("id").each_with_index do |image,index| %>

    <div class="item" data-interval="<%= image.slide_duration %>000">
      <input type="hidden" value="<%= image.id.to_s %>" class="hidden" />
      <div id="image_<%= image.id.to_s %>">
        <%= image_tag image.banner.url(:original), :class=>"image_banner", :style=>"width:100%" %>
      </div>
    </div>
  <% end %>


</div>


<script>
var height = $(window).height();
$(".image_banner").css("height",height * 70/100 );
</script>

<script>
$(function(){

  //draw_graph()
  $('#myCarousel').on('slid.bs.carousel', function() {

    //$("canvas").attr("width", "900").attr("height", "675")
    //$("canvas").css("width", "900").css("height", "675")
//var a = carouselData.$element.find('.item.active')

    line_no = $(this).data('bs.carousel').$element.find('.active .hidden').val();

    // <%# if @refresh == true %>
    //   refresh = "table2"
    // <%# else %>
    //   refresh = "table1"
    // <%# end %>

    if(line_no == "table_0")
    {
      location.reload();
    }

    $.get("/boards", {refresh: true, line_no: line_no}, null, "script");

    //delete(line_no)
//alert(line_no)

    //draw_graph()

  })

});
</script>

