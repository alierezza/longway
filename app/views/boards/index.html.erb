<%= render 'socket' %>

<div class="row">
  <div class="col-md-6 header_board"><b><u><%= ActionView::Base.full_sanitizer.sanitize(Language.find_by(:message=>"Company Title").foreign_language) %></u></b><h3>VISUAL BOARD</h3></div>
  <div class="col-md-2 header_board">
    <b><div id="clockbox" style="border:2px solid black; text-align:center"></div></b>
  </div>
  <div class="col-md-offset-1 col-md-3 header_board"  >
    <b><%= Date.today.strftime("%d %b %Y") %></b>
  </div>
</div>


<br>
<div id="myCarousel" class="carousel slide">

  <!-- Wrapper for slides -->

      <div id="board_graph">
        <%= render "graph" %>
      </div>


  <!-- Controls -->
  <a class="left carousel-control" href="#myCarousel" data-slide="prev" style="left: -20px;">
    <span class="icon-prev"></span>
  </a>
  <a class="right carousel-control" href="#myCarousel" data-slide="next" style="right: -20px;">
    <span class="icon-next"></span>
  </a>
</div>


<%= render "footer" %>

<script>
$(function(){

  var t;

  var start = $('#myCarousel').find('.active').attr('data-interval');
  t = setTimeout("$('#myCarousel').carousel({interval: 1000});", start-1000);

  $('#myCarousel').on('slid.bs.carousel', function () {
    clearTimeout(t);
    var duration = $(this).find('.active').attr('data-interval');

    $('#myCarousel').carousel('pause');
    t = setTimeout("$('#myCarousel').carousel();", duration-1000);
  })

  $('.carousel-control.right').on('click', function(){
    clearTimeout(t);
  });

  $('.carousel-control.left').on('click', function(){
    clearTimeout(t);
  });

// $('.carousel').carousel({
//    // interval: 15000, //changes the speed
//     pause: false
//   })


function GetClock(){
  var d=new Date();
  var nhour=d.getHours(),nmin=d.getMinutes(),nsec=d.getSeconds();
  if(nmin<=9) nmin="0"+nmin
  if(nsec<=9) nsec="0"+nsec;

  document.getElementById('clockbox').innerHTML=""+nhour+":"+nmin+":"+nsec+"";
}

GetClock();
setInterval(GetClock,1000);

});



$(document).ready(function(){

  $(window).load(function() {

    $('#aa').bind('finished', function(){
        //Change text to something else after first loop finishes
        //$(this).marquee('destroy');
        //showText();


        $(this).html($("#message").val())

          //Apply marquee plugin again
          .marquee({
            duration: 13000,
            gap: 0,
            //'left' or 'right'
            direction: 'left'
          })

    }).marquee({
        //speed in milliseconds of the marquee
        duration: 13000,
        gap: 0,
        //'left' or 'right'
        direction: 'left'
    });
  });


    // function showText(){
    //     $.ajax({
    //         type:"GET",
    //         url:"/boards/new",
    //         data:{},
    //         success:function(data){
    //           $("#message").val(data.message);
    //         }
    //     });
    // }
});


if( window.innerHeight != screen.height) {
    // browser is fullscreen
    alert("Please Press OK & F11 to make Fullscreen")
}


</script>




